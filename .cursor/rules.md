# 内容生成规则

## 1. 核心目标

基于提供的参考文章，生成**风格、语言、逻辑完全对齐**的内容，保证准确性（事实无错误）、专业性（术语统一）、可读性（符合技术文档表达习惯）。

## 2. 风格对齐规则

### 2.1 语言风格

- **语气特征**：技术文档风格，专业但不过于学术化，面向 Java 开发者，表达清晰直接
- **句式特征**：
  - 以短句为主（单句通常 ≤20 字），避免冗长嵌套
  - 使用"下文将..."、"需要注意的是"、"建议"等过渡性表达
  - 多用"是...的"、"具备...能力"等判断句式
- **用词规范**：
  - 必须复用参考文章中的核心术语（如："对话模型"而非"聊天模型"、"工具调用"而非"函数调用"、"LangChain4j"统一大小写）
  - 技术术语保持统一：`ChatModel`、`ChatMessage`、`ChatMemory`、`ChatRequest`、`RAG`、`token` 等
  - 避免口语化/网络用语
  - 禁用重复形容词（如避免"非常非常重要"）
  - 使用"需注意"、"建议"、"推荐"等温和建议性表达

### 2.2 排版与结构

- **标题层级**：
  - **一级标题**：使用 `##`，用于主要章节（如：`## 1. 核心接口抽象`、`## 2. 核心组件详解`）
    - 格式：`## 数字. 标题内容`
    - 所有主要章节必须使用数字编号
  - **二级标题**：使用 `###`，用于章节内的子主题（如：`### 2.1 ChatModel`、`### 2.2 ChatMessage`）
    - 格式：`### 数字.数字 标题内容` 或 `### 数字.数字 组件名称`
    - 用于细分组件、能力、特性等
  - **三级标题**：使用 `####`，用于更细粒度的内容划分（如：`#### 2.2.1 SystemMessage 最佳实践`、`#### 2.3.1 常见参数说明`）
    - 格式：`#### 数字.数字.数字 标题内容`
    - 用于最佳实践、参数说明、注意事项等细分内容
  - **统一要求**：
    - 所有文章必须统一使用数字编号系统
    - 同级标题的编号格式保持一致
    - 避免跳过编号（如：1、2、4，应改为 1、2、3）
- **段落密度**：
  - 每段通常 1-3 行，每段只讲 1 个核心观点
  - 段落之间用空行分隔
- **格式规范**：
  - 列表使用「`-`」而非「`1.`」
  - 重点内容用「`**加粗**」强调核心概念（如：`**ChatModel**`、`**对话模型**`）
  - 代码块格式要求见「5.1 代码示例」
  - 提示框使用规范见「5.2 提示框」
  - 引用内容用「`>`」，且仅引用参考文章中出现的数据源

### 2.3 内容组织

- **开头结构**：
  - 第一段：概述主题的核心价值与定位（1-2 句）
  - 第二段：说明本文聚焦的具体内容
  - 使用 `<!-- truncate -->` 标记摘要截断位置
- **版本说明**：
  - **位置**：必须紧跟在 `<!-- truncate -->` 之后，作为文章开头的固定部分
  - **格式**：统一使用 `:::info 版本说明` 框
  - **内容**：`本文基于 **LangChain4j 1.9.1** 版本编写，API 接口与行为特性可能与其他版本存在差异，请以实际使用的版本为准。`
  - **要求**：所有文章必须包含版本说明，确保读者了解文档适用的版本范围
- **代码示例**：
  - **格式统一**：所有代码块必须带 `title` 属性说明文件名（详细格式见「5.1 代码示例」）
  - **完整度要求**：示例代码应包含必要的 import 语句，确保代码可运行；接口定义片段可用 `...` 省略，但实际使用示例必须完整
  - **折叠规则**：长代码示例（超过 20 行）或完整类定义放在 `<details>` 中折叠
  - **注释规范**：关键配置项需添加中文注释说明，注释应简洁明确，避免过度注释
  - **输出说明**：代码后可用 `:::tip 预期输出` 说明运行结果
- **段落过渡**：
  - 章节切换时需添加过渡句，提升逻辑连贯性
  - 使用"下文将..."、"上文已..."、"掌握...后，就可以进入..."等过渡性表达
  - 避免突兀的章节切换，保持内容流畅衔接
- **结尾结构**：
  - **统一位置**：参考文档统一放在文章末尾，作为独立章节
  - **格式规范**：使用 `## 参考文档` 作为标题（如有总结章节，则放在总结之后）
  - **内容要求**：参考文档使用列表格式，包含官方文档链接

## 3. 准确性规则

### 3.1 事实核查

- 所有数据、案例、术语必须与参考文章一致（如参考文章中"LangChain4j 1.9.1"，不得写成其他版本）
- 若参考文章未提及某信息，标注「未提及」而非编造
- 专业概念解释必须完全匹配参考文章的定义（如参考文章中"ChatModel"定义为"面向对话的统一接口"，不得写成其他定义）
- **版本兼容性**：始终强调"以实际版本为准"、"不同版本/厂商的实现可能略有差异"

### 3.2 逻辑一致性

- 行文逻辑链与参考文章匹配（如：参考文章为「问题→原因→解决方案」，生成内容需沿用该逻辑）
- 观点立场与参考文章一致（如参考文章支持"TokenWindowChatMemory 更适合生产环境"，不得生成相反观点）
- 使用过渡性表达保持逻辑连贯（如"下文将..."、"上文已..."，详见「2.1 语言风格」）

### 3.3 术语统一性

- **框架名称**：统一使用 `LangChain4j`（大小写固定）
- **核心接口**：`ChatModel`、`ChatMessage`、`ChatMemory`、`ChatRequest`、`ChatResponse` 等（首字母大写，驼峰命名）
- **概念术语**：
  - "对话模型"（而非"聊天模型"）
  - "工具调用"（而非"函数调用"）
  - "检索增强生成"或"RAG"（而非"检索增强"）
  - "对话记忆"或"记忆"（统一使用，避免混用）
  - "对话历史"或"历史记录"（用于前端展示的完整记录）
  - "token"（小写）
  - "API Key"（大小写固定）
- **实现类**：`OpenAiChatModel`、`MessageWindowChatMemory`、`TokenWindowChatMemory` 等（首字母大写，驼峰命名）
- **表达风格统一**：
  - 版本相关：统一使用"以实际版本为准"或"以实际依赖版本为准"（避免混用）
  - 兼容性说明：统一使用"不同版本/厂商的实现可能略有差异"（保持表述一致）
  - 建议性表达：统一使用"建议"、"推荐"、"需注意"等温和建议性表达
  - 避免混用同义词：如"对话模型"和"ChatModel"在同一段落中应保持一致，避免频繁切换

## 4. 参考样例（关键：嵌入已有文章片段）

### 参考文章片段

> LangChain4j 围绕大语言模型（LLM）的对话能力构建了统一的 `ChatModel` 抽象接口：基于这一接口，我们能够通过一套标准化代码对接不同厂商的模型，适配云端、私有化、Ollama 等多种部署形态；同时以 `ChatMessage` 为核心载体，一站式实现多轮对话、多模态交互、工具调用、结构化输出等核心能力的组合与落地。本文将聚焦「对话模型」展开具体探讨。

### 生成要求

- 复用上述片段的"结构表述方式"（如"基于这一接口，我们能够..."、"同时以...为核心载体，一站式实现..."）
- 保持"概述价值 → 说明能力 → 明确本文聚焦点"的段落结构
- 术语统一：仅使用参考文章中出现的术语，不使用替代词（详细规范见「3.3 术语统一性」）
- 使用过渡性表达（如"下文将..."、"本文将聚焦..."，详见「2.1 语言风格」）

## 5. 特殊格式要求

### 5.1 代码示例

- **title 属性**：
  - 所有代码块必须带 `title` 属性，格式：````java title="文件名.java"````
  - title 中可包含说明性文字，格式：````java title="HelloLangChain4j.java（最小可运行示例）"````
  - 文件名使用驼峰命名或下划线命名，与 Java 命名规范一致
- **代码完整度**：
  - 示例代码应包含必要的 import 语句，确保代码可运行
  - 接口定义片段可用 `...` 省略中间部分，但实际使用示例必须完整
  - 完整类定义应包含：package（如需要）、import、类声明、方法实现
- **代码注释**：
  - 关键配置项需添加中文注释说明（如：`// 唯一标识：建议拼接 userId + sessionId`）
  - 注释应简洁明确，避免过度注释
  - 行内注释用于说明关键逻辑或预期结果（如：`// 你好 Sam！`）
- **details 标签使用规则**：
  - **必须使用场景**：
    - 完整类定义（超过 20 行）
    - 可选内容（如 demo key、SNAPSHOT 配置、完整实现示例）
    - 非核心但有用的补充示例
  - **格式规范**：
    ```markdown
    <details>
    <summary><b>示例标题</b></summary>
    
    ```java title="文件名.java"
    // 代码内容
    ```
    
    </details>
    ```
  - **summary 格式**：使用 `<b>` 标签加粗标题，标题应简洁明确（如：`<summary><b>示例 1：MessageWindowChatMemoryExample</b></summary>`）

### 5.2 提示框

- **统一使用规范**：
  - `:::tip`：用于最佳实践、工程建议、预期输出说明
    - 格式：`:::tip` 或 `:::tip 标题`（如：`:::tip 预期输出`、`:::tip 工程实践建议`）
    - 位置：紧跟在相关代码或内容之后
  - `:::info`：用于版本说明、重要信息
    - 格式：`:::info 版本说明`（版本说明必须使用此格式）
    - 位置：版本说明必须放在文章开头（`<!-- truncate -->` 之后）
  - `:::caution`：用于警告、注意事项
    - 格式：`:::caution`（通常不带标题）
    - 使用场景：需要特别提醒读者注意的风险或限制
  - `:::danger`：用于严重警告（较少使用）
- **使用原则**：
  - 提示框内容应简洁明了，避免冗长
  - 同一类型提示框的格式保持一致
  - 提示框与正文内容之间用空行分隔

### 5.3 版本兼容性说明

- 在涉及 API 差异的地方，必须添加兼容性说明（核心原则见「3.1 事实核查」）：
  - "不同版本/厂商的实现可能略有差异，请以实际依赖版本为准"
  - "以下代码仅演示回调交互逻辑，实际请以项目接入的 SDK 为准"

## 6. 质量验收标准

- **无语法错误、错别字**
- **风格相似度 ≥90%**（与参考文章对比）：
  - 语言风格一致（语气、句式、用词）
  - 结构组织一致（标题层级、段落组织、内容编排）
  - 术语使用一致（核心术语、表达方式）
  - 格式规范一致（代码示例、提示框、details 标签）
- **无事实性错误**：
  - 版本号准确（如 LangChain4j 1.9.1）
  - API 名称准确（类名、方法名、参数名）
  - 概念定义准确（与参考文章完全一致）
- **格式规范检查**：
  - 版本说明位置正确（`<!-- truncate -->` 之后）
  - 代码示例带 title 属性
  - 长代码示例使用 details 标签折叠
  - 参考文档位置统一（文章末尾）
  - 标题层级规范（数字编号、层级清晰）
- **可读性评分 ≥8 分**（10 分制，流畅无拗口）：
  - 段落长度适中（每段 1-3 行）
  - 逻辑连贯清晰（有过渡句衔接）
  - 代码示例完整可运行（包含必要 import）
  - 注释清晰明确（关键配置有说明）

